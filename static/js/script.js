$(document).ready(function () {
  var map = new Map("mapid");

  var geojson = {
    type: "Feature",
    properties: {
      featurecla: "Admin-0 country",
      scalerank: 1,
      LABELRANK: 2,
      SOVEREIGNT: "United Kingdom",
      SOV_A3: "GB1",
      ADM0_DIF: 1,
      LEVEL: 2,
      TYPE: "Country",
      ADMIN: "United Kingdom",
      ADM0_A3: "GBR",
      GEOU_DIF: 0,
      GEOUNIT: "United Kingdom",
      GU_A3: "GBR",
      SU_DIF: 0,
      SUBUNIT: "United Kingdom",
      SU_A3: "GBR",
      BRK_DIFF: 0,
      NAME: "United Kingdom",
      NAME_LONG: "United Kingdom",
      BRK_A3: "GBR",
      BRK_NAME: "United Kingdom",
      BRK_GROUP: null,
      ABBREV: "U.K.",
      POSTAL: "GB",
      FORMAL_EN: "United Kingdom of Great Britain and Northern Ireland",
      FORMAL_FR: null,
      NAME_CIAWF: "United Kingdom",
      NOTE_ADM0: null,
      NOTE_BRK: null,
      NAME_SORT: "United Kingdom",
      NAME_ALT: null,
      MAPCOLOR7: 6,
      MAPCOLOR8: 6,
      MAPCOLOR9: 6,
      MAPCOLOR13: 3,
      POP_EST: 64769452,
      POP_RANK: 16,
      GDP_MD_EST: 2788000.0,
      POP_YEAR: 2017,
      LASTCENSUS: 2011,
      GDP_YEAR: 2016,
      ECONOMY: "1. Developed region: G7",
      INCOME_GRP: "1. High income: OECD",
      WIKIPEDIA: -99,
      FIPS_10_: "UK",
      ISO_A2: "GB",
      ISO_A3: "GBR",
      ISO_A3_EH: "GBR",
      ISO_N3: "826",
      UN_A3: "826",
      WB_A2: "GB",
      WB_A3: "GBR",
      WOE_ID: -90,
      WOE_ID_EH: 23424975,
      WOE_NOTE:
        "Eh ID includes Channel Islands and Isle of Man. UK constituent countries of England (24554868), Wales (12578049), Scotland (12578048), and Northern Ireland (20070563).",
      ADM0_A3_IS: "GBR",
      ADM0_A3_US: "GBR",
      ADM0_A3_UN: -99,
      ADM0_A3_WB: -99,
      CONTINENT: "Europe",
      REGION_UN: "Europe",
      SUBREGION: "Northern Europe",
      REGION_WB: "Europe & Central Asia",
      NAME_LEN: 14,
      LONG_LEN: 14,
      ABBREV_LEN: 4,
      TINY: -99,
      HOMEPART: 1,
      MIN_ZOOM: 0.0,
      MIN_LABEL: 1.7,
      MAX_LABEL: 6.7,
      NE_ID: 1159320713,
      WIKIDATAID: "Q145",
      NAME_AR: "المملكة المتحدة",
      NAME_BN: "যুক্তরাজ্য",
      NAME_DE: "Vereinigtes Königreich",
      NAME_EN: "United Kingdom",
      NAME_ES: "Reino Unido",
      NAME_FR: "Royaume-Uni",
      NAME_EL: "Ηνωμένο Βασίλειο",
      NAME_HI: "यूनाइटेड किंगडम",
      NAME_HU: "Egyesült Királyság",
      NAME_ID: "Britania Raya",
      NAME_IT: "Regno Unito",
      NAME_JA: "イギリス",
      NAME_KO: "영국",
      NAME_NL: "Verenigd Koninkrijk",
      NAME_PL: "Wielka Brytania",
      NAME_PT: "Reino Unido",
      NAME_RU: "Великобритания",
      NAME_SV: "Storbritannien",
      NAME_TR: "Birleşik Krallık",
      NAME_VI: "Vương quốc Liên hiệp Anh và Bắc Ireland",
      NAME_ZH: "英国",
    },
    geometry: {
      type: "MultiPolygon",
      coordinates: [
        [
          [
            [-6.197884894220991, 53.867565009163364],
            [-6.953730231138067, 54.073702297575636],
            [-7.572167934591064, 54.059956366586],
            [-7.366030646178785, 54.595840969452723],
            [-7.572167934591064, 55.131622219454869],
            [-6.733847011736145, 55.172860012423783],
            [-5.661948614921968, 54.554603176483809],
            [-6.197884894220991, 53.867565009163364],
          ],
        ],
        [
          [
            [-3.093830673788716, 53.404547400669685],
            [-3.092079637047107, 53.404440822963579],
            [-2.945008510744344, 53.984999701546712],
            [-3.614700825433033, 54.600936773292574],
            [-3.630005458989331, 54.615012925833014],
            [-4.844169073903061, 54.790971177786844],
            [-5.082526617849283, 55.061600653699372],
            [-4.7191121077567, 55.508472601943481],
            [-5.047980922862109, 55.783985500707558],
            [-5.586397670911197, 55.311146145236819],
            [-5.644998745130238, 56.275014960344834],
            [-6.149980841486411, 56.785009670633485],
            [-5.786824713555291, 57.818848375064647],
            [-5.009998745127632, 58.630013332750082],
            [-4.211494513353557, 58.55084503847911],
            [-3.005004848635281, 58.635000108466329],
            [-4.073828497728073, 57.553024807355257],
            [-3.055001796877718, 57.69001902936094],
            [-1.959280564776918, 57.684799709699519],
            [-2.219988165689358, 56.870017401753557],
            [-3.119003058271176, 55.973793036515474],
            [-2.085009324543023, 55.9099984808513],
            [-2.005675679673857, 55.804902850350175],
            [-1.11499101399221, 54.624986477265395],
            [-0.4304849918542, 54.464376125702188],
            [0.184981316742039, 53.325014146531032],
            [0.469976840831805, 52.929999498092002],
            [1.681530795914682, 52.739520168664001],
            [1.559987827164321, 52.099998480836007],
            [1.050561557630942, 51.806760565795685],
            [1.449865349950244, 51.289427802121907],
            [0.550333693045502, 50.765738837275876],
            [-0.787517462558696, 50.77498891865622],
            [-2.489997524414434, 50.500018622431242],
            [-2.956273972984093, 50.696879991247044],
            [-3.617448085942385, 50.228355617872751],
            [-4.542507900399244, 50.341837063185665],
            [-5.245023159191135, 49.959999904981089],
            [-5.776566941745273, 50.159677639356858],
            [-4.309989793301895, 51.210001125689189],
            [-3.414850633142123, 51.42600861266925],
            [-3.422719467108379, 51.426848167406092],
            [-4.98436723471093, 51.593466091511004],
            [-5.267295701508942, 51.991400458374585],
            [-4.222346564134909, 52.301355699261364],
            [-4.77001339356417, 52.840004991255626],
            [-4.579999152026971, 53.495003770555172],
            [-3.093830673788716, 53.404547400669685],
          ],
        ],
      ],
    },
  };

  map.setOutline(geojson);
});

$("#searchBtn").click(async function () {
  let country = $("#searchBox").val();
  data = await getData(country);
  populatePage(data);
});

async function getData(country) {
  let response = await fetch("../../static/php/main.php?country=" + country);
  let data = await response.json();
  return data;
}

function populatePage(data) {
  console.log(data);
}
